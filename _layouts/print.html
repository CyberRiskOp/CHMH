---
layout: microtypo
---
{% include metadata %}
<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="generator" content="Jekyll https://jekyllrb.com/">
		<meta name="description" content="{{ site.description }}" />
		<meta name="keywords" content="{{ site.keywords }}" />
    <title>{{ page.title }} â€“ {{ project-name }}</title>
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/print.css">
		<link rel="apple-touch-icon" href="{{ site.baseurl }}/assets/icons/apple-touch-icon.png">
		<link rel="icon" type="image/png" href="{{ site.baseurl }}/assets/icons/touch-icon.png" sizes="192x192">
		<link rel="icon" type="image/png" href="{{ site.baseurl }}/assets/icons/favicon.png">

		<script>
      window.PagedConfig = {
        after: (flow) => {
					console.log(flow);
					/*if (flow.rendered) {
						//window.print();
						let elementHtml = flow.pagesArea;
						let htmlBody = document.documentElement.outerHTML;
						let optionsData = {
							// Either "pdf" or "screenshot"
							output: "pdf",
							// HTML content to render. Either url or html is required
							html: htmlBody.toString(),
							// If we should emulate @media screen instead of print
							emulateScreenMedia: false,
							// If we should ignore HTTPS errors
							ignoreHttpsErrors: true,
							// If true, page is scrolled to the end before rendering
							// Note: this makes rendering a bit slower
							scrollPage: false,
							// Passed to Puppeteer page.waitFor()
							//waitFor: "networkidle2",
							// Passed to Puppeteer page.pdf()
							//pdf: {}
						};
						let optionsDataURI = encodeURIComponent(JSON.stringify(optionsData));
						var xmlhttp = new XMLHttpRequest();
						xmlhttp.open("POST", "https://cors-anywhere.herokuapp.com/https://numenpdf.herokuapp.com/api/render");
						xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
						//xmlhttp.setRequestHeader('x-api-key', 'foobar');
						xmlhttp.responseType = "blob";
						xmlhttp.send(JSON.stringify(optionsData));
						xmlhttp.onreadystatechange = function() {
							if (xmlhttp.readyState === 4) {
								console.log(xmlhttp.response);
								if (typeof window.navigator.msSaveBlob === 'function') {
									window.navigator.msSaveBlob(xmlhttp.response, "PdfName-" + new Date().getTime() + ".pdf");
								} else {
									var blob = xmlhttp.response;
									var link = document.createElement('a');
									link.href = window.URL.createObjectURL(blob);
									link.download = "PdfName-" + new Date().getTime() + ".pdf";

									// append the link to the document body

									document.body.appendChild(link);

									link.click();
								}
							}
						}
						console.log(optionsData);
					}*/
				}
      }
    </script>
		<script src="https://unpkg.com/pagedjs/dist/paged.polyfill.js"></script>
		<script>
			function getUrlVars() {
				var vars = {};
				var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
					vars[key] = value;
				});
				return vars;
			}
			let width = getUrlVars()["width"];
			let height = getUrlVars()["height"];
			let orientation = getUrlVars()["orientation"];
			let marginTop = getUrlVars()["marginTop"];
			let marginBottom = getUrlVars()["marginBottom"];
			let marginLeft = getUrlVars()["marginLeft"];
			let marginRight = getUrlVars()["marginRight"];

			if (width != undefined) {document.documentElement.style.setProperty('--width', width);}
			if (height != undefined) {document.documentElement.style.setProperty('--height', height);}
			if (orientation != undefined) {document.documentElement.style.setProperty('--orientation', orientation);}
			if (marginTop != undefined) {document.documentElement.style.setProperty('--margin-top', marginTop);}
			if (marginBottom != undefined) {document.documentElement.style.setProperty('--margin-bottom', marginBottom);}
			if (marginLeft != undefined) {document.documentElement.style.setProperty('--margin-left', marginLeft);}
			if (marginRight != undefined) {document.documentElement.style.setProperty('--margin-right', marginRight);}
		</script>

		<script src="{{ site.baseurl }}/assets/js/orderedList.js" type="text/javascript"></script>
	  <script>
	    // waiting for the before everything hook for that one
	    window.onload = function () {
	      noteNumbering();

	      /* render pagedjs after a first render in the browser (need to calculate the computed line-height and font-metrics */
	      //setTimeout(pagedjs, 3000);
	      setTimeout(addingNumToOl, 20000);

	    }
	    // after the layout, add the start property to each ol element
	    addingNumToOl();

	  </script>
	</head>
<body>
	{% capture layout %}print-layout/{% if work.products['paged-view'].layout %}{{work.products['paged-view'].layout}}{% else %}default{% endif %}.html{% endcapture %}
	{% include {{layout}} %}
</body>
</html>
